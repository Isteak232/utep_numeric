

all: libutepnum.a

integers/integer_ops.o: integers/integer_ops.c include/integer_ops.h include/widefloat_ops.h
	gcc -Iinclude -Wall -O0 -g -c integers/integer_ops.c -o $@

safeintegers/safeinteger_ops.o: safeintegers/safeinteger_ops.c include/integer_ops.h include/safeinteger_ops.h
	gcc -Iinclude -Wall -O0 -g -c safeintegers/safeinteger_ops.c -o $@

widefloat/widefloat_ops.o: widefloat/widefloat_ops.c include/integer_ops.h include/widefloat_ops.h include/safeinteger_ops.h
	gcc -Iinclude -Wall -O0 -g -c widefloat/widefloat_ops.c -o $@

libutepnum.a: integers/integer_ops.o widefloat/widefloat_ops.o safeintegers/safeinteger_ops.o
	ar -rv $@ $^

check: test

test: tests/test_integers
	tests/test_integers 1 1 42 17
	tests/test_integers 1 1 0  99999999999
	tests/test_integers 2 2 0  0
	tests/test_integers 2 3 99999999999999999999 1234567890123456767890
	tests/test_integers 20 20 1 20815864389328798163850480654728171077230524494533409610638224700807216119346720596024478883464648369684843227908562015582767132496646929816279813211354641525848259018778440691546366699323167100945918841095379622423387354295096957733925002768876520583464697770622321657076833170056511209332449663781837603694136444406281042053396870977465916057756101739472373801429441421111406337458175
	tests/test_integers 20 20 10885604686866482425831761833019426193728106143503367442049552692184118803748387427764348744051854384539314477777243296421756213871261444081278086194926230906071693168267053690084395591036659908408755581193984014764699878189014988218029010382650118231025222847442162490494746817517710683527825872441622542662569984858490126810770768782408127356088172515549844416771747022566847428914187 20815864389328798163850480654728171077230524494533409610638224700807216119346720596024478883464648369684843227908562015582767132496646929816279813211354641525848259018778440691546366699323167100945918841095379622423387354295096957733925002768876520583464697770622321657076833170056511209332449663781837603694136444406281042053396870977465916057756101739472373801429441421111406337458175


tests/test_integers: libutepnum.a tests/test_integers.o
	gcc -Iinclude -L. -Wall -O0 -g -o $@ tests/test_integers.o libutepnum.a

tests/test_integers.o: tests/test_integers.c include/utepnum.h
	gcc -Iinclude -Wall -O0 -g -c tests/test_integers.c -o $@

clean:
	rm -f libutepnum.a
	rm -f integers/integer_ops.o
	rm -f safeintegers/safeinteger_ops.o
	rm -f widefloat/widefloat_ops.o
	rm -f tests/test_integers.o
	rm -f tests/test_integers


.PHONY: all clean test check
